# 幾何学戦争 (The Battle Geometry)

![Python](https://img.shields.io/badge/Python-3.x-blue.svg)
![Pygame](https://img.shields.io/badge/Library-Pygame-green.svg)

幾何学図形を召喚して敵の城を落とす、2ライン制のタワーディフェンスゲーム。
キャラクターの描画に画像素材を使わず、プログラムで図形を動的に生成しているのが特徴です。

## 1. ゲーム概要
* **ジャンル**: タワーディフェンス
* **プレイ人数**: 1人
* **開発環境**: Python 3.x, Pygame

全12種類の幾何学ユニットから10体を選んでデッキを組み、全3ステージの攻略を目指します。
時間経過で貯まる資金を消費してユニットを召喚し、自軍の城（右側）を守りつつ、敵軍の城（左側）を破壊すればクリアです。

## 2. 操作方法・マニュアル

| キー / 操作 | アクション |
| :--- | :--- |
| **マウス左クリック** | ユニット召喚 / ステージ選択 / チーム編成 |
| **Space キー** | **出撃レーンの切り替え (上 ⇔ 下)** |
| **Esc キー** | ゲーム終了 |

### ゲームの流れ
1. **出撃レーンの選択**: `Space`キーを押すと、ユニットを出すレーン（上または下）が切り替わります。画面中央の表示を確認してください。
2. **ユニット召喚**: 画面下のボタンをクリックしてユニットを召喚します。コスト（資金）が必要です。
3. **勝利条件**: 敵の城（左端）の体力を0にすると勝利です。逆に自分の城（右端）が壊されると敗北です。

## 3. 工夫した点
* **画像を使わないキャラクター描画**:
  味方キャラクターや攻撃エフェクトには画像ファイルを使用せず、すべて `generator.py` 内の計算（三角関数 `sin`, `cos`）によって描画しています。これにより、画像を用意しなくても多彩なキャラクター（正多角形、星型、フラクタルなど）を表現できました。
* **2ライン制の戦略性**:
  単調な押し合いにならないよう、フィールドを上下2分割しました。手薄なレーンを攻めたり、敵が攻めてきたレーンを急いで守ったりと、状況判断が必要になるようにしました。
* **チーム編成機能**:
  全12種類のユニットから10体を選ぶデッキ編成機能を実装し、プレイヤーが自分の好きな戦術で戦えるようにしました。

## 4. 苦労した点
* **幾何学図形の計算**:
  「五角形」や「星型」、「雪の結晶」などの座標計算に苦労しました。特に `math.sin` や `math.cos` を使って頂点の位置を正確に割り出し、中心から回転させる処理の調整に時間がかかりました。
* **ゲームバランスの調整**:
  「足は速いが脆いトライアングル」「鈍足だが硬いトラペゾイド」など、12体それぞれの個性を出すためのステータス調整（HP、攻撃力、コスト）が大変でした。
* **当たり判定とレーン処理**:
  上下のレーンで独立して戦闘が行われるようにするため、敵と味方の距離計算や当たり判定のロジックを工夫する必要がありました。

## インストールと実行
実行には Python と Pygame ライブラリが必要です。

```bash
# 1. リポジトリのクローン
git clone [https://github.com/TCRita/The-battle-geometry.git](https://github.com/TCRita/The-battle-geometry.git)
cd The-battle-geometry

# 2. 依存ライブラリのインストール
pip install pygame

# 3. ゲームの実行
python main.py
